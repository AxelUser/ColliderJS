!function(t){function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=3)}([function(t,i,e){"use strict";i.a=function(t,i){this.x=t||0,this.y=i||0;var e,s;this.add=function(t){return this.x+=t.x,this.y+=t.y,this},this.sub=function(t){return this.x-=t.x,this.y-=t.y,this},this.nor=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},this.dot=function(t){return this.x*t.x+this.y*t.y},this.len2=function(){return this.dot(this)},this.len=function(){return Math.sqrt(this.len2())},this.mul=function(t){return"object"==typeof t?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this},this.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},this.distance=function(t){return e=this.x-t.x,s=this.y-t.y,Math.sqrt(e*e+s*s)}}},function(t,i,e){"use strict";var s=e(0);e(1);i.a=function(t,i,e){this.id=t,this.position=new s.a(i,e),this.velocity=new s.a,this.speed=0,this.parentId=null,this.connectionsMap={},this.childs=[],this.linked=!1,this.distance=!1,this.alpha=.3,this.radius=2,this.hasError=!1,this.connectionsAlphaInc=.01,this.cell=null,this.isCustom=!1,this.jointAlpha=.8,this.linkAlpha=this.alpha,this.linkToParentAlpha=0;var n=new s.a,o=0;this.riseError=function(){this.hasError=!0,this.cell.hasError=!0},this.update=function(t){n=n.copyFrom(this.velocity),n.mul(this.speed*t),this.position.add(n),this.jointAlpha=.8,this.linkAlpha=this.alpha},this.addChilds=function(t){for(var i=0,e=null,s={},n=[],o=0;o<t.length;o++)e=t[o],i=null!=this.connectionsMap[e.id+""]?this.connectionsMap[e.id+""]+this.connectionsAlphaInc:0,s[e.id+""]=i<=.3?i:.3,n.push(e);this.connectionsMap=s,this.childs=n},this.removeChild=function(t){for(o=0;o<this.childs.length;o++)this.childs[o]===t&&this.childs.splice(o,1)},this.onLeaving=null}},function(t,i,e){"use strict";var s=e(0);i.a=function(t,i,e,n,o,h,r){this.isCustom=!1,this.isSelected=!1,this.id=t||0,this.width=o||0,this.height=h||0,this.rowIndex=i||0,this.colIndex=e||0,this.maxJoins=r,this.top=n.y,this.bottom=n.y+h,this.left=n.x,this.right=n.x+o,this.center=new s.a(this.left+this.width/2,this.top+this.height/2),this.hasError=!1,this.particles=[],this.neighbors=[],this.setParticles=function(t){self=this,this.particles=[].concat(t.map(function(t){return t.cell=self,t}))},this.addParticle=function(t){t.cell=this,this.particles.push(t)},this.check=function(){for(var t=0;t<this.particles.length;t++){var i=this.particles[t].position.x,e=this.particles[t].position.y;if(Math.ceil(i)<this.left||Math.floor(i)>this.right||Math.ceil(e)<this.top||Math.floor(e)>this.bottom)return!1}return!0},this.removeSelfFromNeighbors=function(t){for(var i=0;i<this.neighbors.length;i++){var e=this.neighbors[i];e.neighbors=e.neighbors.filter(function(i){return!(void 0==t||!t(i))||this.id!=i.id},this)}},this.removeGoneParticles=function(){for(var t=[],i=[],e=0,s=0,n=0;n<this.particles.length;n++)e=Math.round(this.particles[n].position.x),s=Math.round(this.particles[n].position.y),e<this.left||e>this.right||s<this.top||s>this.bottom?(this.particles[n].cell=null,t.push(this.particles[n]),null!=this.particles[n].onLeaving&&this.particles[n].onLeaving(this.particles[n])):i.push(this.particles[n]);return i.length<this.particles.length&&this.setParticles(i),t}}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(4);window.ColliderJS=s.a},function(t,i,e){"use strict";var s=e(0),n=e(1),o=(e(2),e(5));i.a=function(t,i){var e,h,r,l,c,a,u,d,f,p,g=[],v=0,x=0,w={},y=i||!1,b=i||!1,m=i||!1,C=!1,P=i||!1,F=!0,M=i||!1,A=null;this.setDebugMode=function(t){y=t,b=t,m=t,P=t,M=t};var I=function(){document[f]?R():E()},S=function(t){t.ctrlKey&&(F?R():E())},k=function(t){null!=A&&(A.isSelected=!1,A.neighbors.forEach(function(t){t.isSelected=!1}));var i=w.getCellForPosition(t.clientX,t.clientY);i.isSelected=!0,i.neighbors.forEach(function(t){t.isSelected=!0}),A=i},O=function(){void 0!==document.hidden?(f="hidden",p="visibilitychange"):void 0!==document.msHidden?(f="msHidden",p="msvisibilitychange"):void 0!==document.webkitHidden&&(f="webkitHidden",p="webkitvisibilitychange"),void 0===document[f]?(console.log("This footage requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API. Will be using fallback."),j(window,"focus",E),j(window,"blur",R)):j(document,p,I)},E=function(){F||(F=!0,H())},R=function(){F=!1},H=function(){!F||m&&C||(x=L(),c=(x-v)/100,v=x,c>.2&&(c=.2),J(c),N(),G(H))},q=function(){h=t.width=window.innerWidth,r=t.height=window.innerHeight,l=new s.a(h/2,r/2),W()},T=function(t){for(var i=h*r/6e3,e=0,s=0,o=0;o<i;o++){e=Math.random()*window.innerWidth,s=Math.random()*window.innerHeight;var l=new n.a(o,e,s);l.velocity.x=Math.random()-.5,l.velocity.y=Math.random()-.5,l.velocity.nor(),l.speed=2,g.push(l)}return g},W=function(){w=new o.a(h,r),w.initGrid(),w.addParticles(T),g=w.getAllParticles()},j=function(t,i,e){null!=t&&(t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e)},N=function(){for(e.clearRect(0,0,h,r),e.lineWidth=1.5,d={},a=0;a<g.length;a++)for(d=g[a],e.strokeStyle="rgba(255, 255, 255, "+d.linkAlpha.toPrecision(3)+")",b&&d.hasError?(C=!0,e.fillStyle="red",e.fillRect(d.position.x-2,d.position.y-2,5,5)):(e.beginPath(),e.fillStyle="rgba(255, 255, 255, "+d.jointAlpha.toPrecision(3)+")",e.arc(d.position.x,d.position.y,d.radius,0,2*Math.PI),e.fill()),u=0;u<d.childs.length;u++)e.strokeStyle="rgba(255, 255, 255, "+d.connectionsMap[d.childs[u].id+""].toPrecision(3)+")",e.beginPath(),e.moveTo(d.position.x,d.position.y),e.lineTo(d.childs[u].position.x,d.childs[u].position.y),e.stroke();y&&(e.strokeStyle="green",e.fillStyle="rgba(255, 255, 255, 0.5)",w.iterateCells(function(t){e.font="10px Arial",e.fillText(t.id,t.left,t.top+10),e.rect(t.left,t.top,t.width,t.height),t.isSelected&&(e.fillStyle="rgba(0, 0, 255, 0.3)",e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle="rgba(255, 255, 255, 0.5)"),b&&t.hasError&&(e.fillStyle="rgba(255, 0, 0, 0.2)",e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle="rgba(255, 255, 255, 0.5)")}),e.stroke())},G=function(t){window.requestAnimationFrame?window.requestAnimationFrame(t):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(t):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(t):window.setTimeout(t,1e3/60)},J=function(t){for(a=0;a<g.length;a++)g[a].update(t),g[a].position.x>h&&(g[a].velocity.x*=-1,g[a].position.x=h),g[a].position.x<0&&(g[a].velocity.x*=-1,g[a].position.x=0),g[a].position.y>r&&(g[a].velocity.y*=-1,g[a].position.y=r),g[a].position.y<0&&(g[a].velocity.y*=-1,g[a].position.y=0);w.update()},L=function(){return(new Date).getTime()};!function(){if(!t)return!1;v=L(),e=t.getContext("2d"),j(window,"resize",q),O(),M&&j(window,"dblclick",k),P&&j(window,"click",S),q(),H()}()}},function(t,i,e){"use strict";var s=e(0),n=e(2);i.a=function(t,i,e){function o(t){for(var i=[],e=t.cell,s=0;s<e.neighbors.length;s++){var n=e.neighbors[s];i=i.concat(n.particles.filter(function(i){return null==i.connectionsMap[t.id+""]}))}return 0==i.length&&null!=c&&(i=c(t)),i}var h=e||{};this.cells=[],this.cellFixedWidth=32,this.cellFixedHeight=32,this.debugMode=h.enableDebug||!1,this.rowsCount=0,this.colsCount=0,this.width=t,this.height=i,this.cellsSearchRadius=1,this.cellsIgnoreRadius=0,this.maxJoins=h.maxJoins||1,this.maxNeighborsToConnect=5,this.distanceErrorThreshold=200;var r=h.onAfterGridCreation,l=h.trianglesPointsFactory,c=h.onRequestAdditionalNeighbors;this.getCellForPosition=function(t,i){var e=Math.floor(t/this.cellFixedWidth),s=Math.floor(i/this.cellFixedHeight);return this.cells[s][e]},this.getCellForParticle=function(t){Math.floor(t.position.x/this.cellFixedWidth),Math.floor(t.position.y/this.cellFixedHeight);return this.getCellForPosition(t.position.x,t.position.y)},this.getTrianglesPoints=function(){return l?l():null},this.initGrid=function(){var t=0;this.cells=[],this.rowsCount=0;for(var i=0;i<this.height;i+=this.cellFixedHeight,this.rowsCount++){this.colsCount=0,this.cells.push([]);for(var e=0;e<this.width;e+=this.cellFixedWidth,this.colsCount++,t++){var o=new s.a(e,i),h=i+this.cellFixedHeight<=this.height?this.cellFixedHeight:this.height-i,l=e+this.cellFixedWidth<=this.width?this.cellFixedWidth:this.width-e;this.cells[this.rowsCount].push(new n.a(t,this.rowsCount,this.colsCount,o,l,h,this.maxJoins))}}this.initNeighborsForCells(),r&&r(this)},this.addParticles=function(t){var i=t(this);console.log("Particles: "+i.length);for(var e=0;e<i.length;e++){this.getCellForParticle(i[e]).addParticle(i[e])}},this.guessOffset=function(t,i,e){var s=0,n=0;return t<e.left?s--:t>e.right&&s++,i<e.top?n--:i>e.bottom&&n++,{xOffset:s,yOffset:n}},this.updateParticlesInCells=function(){for(var t=0;t<this.cells.length;t++)for(var i=0;i<this.cells[t].length;i++)for(var e=this.cells[t][i],s=e.removeGoneParticles(),n=0;n<s.length;n++){var o=s[n],h=o.position.x,r=o.position.y,l=this.guessOffset(h,r,e);l.yOffset=t+l.yOffset>=0&&t+l.yOffset<this.rowsCount?l.yOffset:0;var c=t+l.yOffset;l.xOffset=i+l.xOffset>=0&&i+l.xOffset<this.colsCount?l.xOffset:0;var a=i+l.xOffset;this.cells[c][a].addParticle(o)}},this.initNeighborsForCells=function(t,i,e){t=t||this.cellsIgnoreRadius,i=i||this.cellsSearchRadius,e=e||!0;var s=function(t){for(var i,e,s=t.length;0!==s;)e=Math.floor(Math.random()*s),s-=1,i=t[s],t[s]=t[e],t[e]=i;return t};this.iterateCells(function(n,o){var h=o.getCellsNeighbors(t,i,n,o);n.neighbors=e?s(h):h})},this.getCellsNeighbors=function(t,i,e,s){for(var n=[],o=[e.rowIndex-t,e.rowIndex+t],h=[e.colIndex-t,e.colIndex+t],r=e.rowIndex-i;r<=e.rowIndex+i&&r<s.rowsCount;r++)for(var l=e.colIndex-i;l<=e.colIndex+i&&l<s.colsCount;l++)r>=0&&l>=0&&(r<o[0]||r>o[1]||l<h[0]||l>h[1])&&(r==e.rowIndex&&l==e.colIndex||n.push(s.cells[r][l]));return n},this.connectParticles=function(){for(var t=0;t<this.cells.length;t++)for(var i=this.cells[t],e=0;e<i.length;e++)for(var s=i[e],n=0;n<s.particles.length;n++){var h=s.particles[n];h.addChilds(o(h).slice(0,s.maxJoins))}},this.iterateCells=function(t){for(var i=0;i<this.cells.length;i++)for(var e=this.cells[i],s=0;s<e.length;s++){var n=e[s];t(n,this)}},this.getAllParticles=function(){var t=[];return this.iterateCells(function(i){t=t.concat(i.particles)}),t},this.update=function(){this.updateParticlesInCells(),this.connectParticles()}}}]);